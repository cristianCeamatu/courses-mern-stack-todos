(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,a){e.exports=a(85)},85:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),c=a.n(o),l=a(21),u=a(22),s=a(25),i=a(24),d=a(9),m=a(0),p=a.n(m),E=a(96),O=a(87),f=a(97),b=a(98),g=a(99),h=a(100),j=a(101),y=a(102),S=a(10),R=a(15),v=a.n(R),_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},A=function(){return{type:"CLEAR_ERRORS"}},T=function(e){var t=e().auth.token,a={headers:{"Content-Type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},N=a(106),L=a(88),C=a(89),D=a(90),k=a(91),w=a(92),I=a(93),G=a(94),U=a(95),F=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),s=u[0],i=u[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),E=p[0],f=p[1],b=Object(n.useState)(""),g=Object(d.a)(b,2),h=g[0],j=g[1],y=Object(n.useState)(null),S=Object(d.a)(y,2),R=S[0],v=S[1],_=e.error,A=e.isAuthenticated;return Object(n.useEffect)((function(){"REGISTER_FAIL"===_.id?v(_.msg):v(null),o&&A&&c(!o)}),[_]),r.a.createElement(O.a,{style:{cursor:"pointer"},onClick:function(){return c(!o)}},"Register",r.a.createElement(N.a,{isOpen:o,toggle:function(){e.clearErrors(),c(!o)}},r.a.createElement(L.a,{toggle:function(){e.clearErrors(),c(!o)}},"Register"),r.a.createElement(C.a,null,R?r.a.createElement(D.a,{color:"danger"},R):null,r.a.createElement(k.a,{onSubmit:function(t){t.preventDefault(),e.register({name:s,email:E,password:h})}},r.a.createElement(w.a,null,r.a.createElement(I.a,{for:"name"},"Name"),r.a.createElement(G.a,{type:"text",name:"name",id:"name",placeholder:"Full name",className:"mb-3",onChange:function(e){i(e.target.value)}}),r.a.createElement(I.a,{for:"email"},"Email"),r.a.createElement(G.a,{type:"email",name:"email",id:"email",placeholder:"Email address",className:"mb-3",onChange:function(e){f(e.target.value)}}),r.a.createElement(I.a,{for:"password"},"Password"),r.a.createElement(G.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:function(e){j(e.target.value)}}),r.a.createElement(U.a,{type:"submit",color:"dark",className:"mt-2 btn-block"},"Register"))))))};F.prototypes={isAuthenticated:p.a.bool.isRequired,error:p.a.object.isRequired,register:p.a.func.isRequired,clearErrors:p.a.func.isRequired};var q=Object(S.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:function(e){var t=e.name,a=e.email,n=e.password;return function(e){var r=JSON.stringify({name:t,email:a,password:n});v.a.post("/api/users",r,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"CLEAR_ERRORS"}),e({type:"REGISTER_SUCCESS",payload:t.data})})).catch((function(t){e(_(t.response.data.msg,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"})}))}},clearErrors:A})(F),P=function(e){var t=e.error,a=e.isAuthenticated,o=e.login,c=e.clearErrors,l=Object(n.useState)(!1),u=Object(d.a)(l,2),s=u[0],i=u[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),E=p[0],f=p[1],b=Object(n.useState)(""),g=Object(d.a)(b,2),h=g[0],j=g[1],y=Object(n.useState)(null),S=Object(d.a)(y,2),R=S[0],v=S[1];return Object(n.useEffect)((function(){"LOGIN_FAIL"===t.id?v(t.msg):v(null),s&&a&&i(!s)}),[t]),r.a.createElement(O.a,{style:{cursor:"pointer"},onClick:function(){return i(!s)}},"Login",r.a.createElement(N.a,{isOpen:s,toggle:function(){c(),i(!s)}},r.a.createElement(L.a,{toggle:function(){c(),i(!s)}},"Login"),r.a.createElement(C.a,null,R?r.a.createElement(D.a,{color:"danger"},R):null,r.a.createElement(k.a,{onSubmit:function(e){e.preventDefault(),o({email:E,password:h})}},r.a.createElement(w.a,null,r.a.createElement(I.a,{for:"email"},"Email"),r.a.createElement(G.a,{type:"email",name:"email",id:"email",placeholder:"Email address",className:"mb-3",onChange:function(e){f(e.target.value)}}),r.a.createElement(I.a,{for:"password"},"Password"),r.a.createElement(G.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:function(e){j(e.target.value)}}),r.a.createElement(U.a,{type:"submit",color:"dark",className:"mt-2 btn-block"},"Login"))))))};P.prototypes={isAuthenticated:p.a.bool.isRequired,error:p.a.object.isRequired,clearErrors:p.a.func.isRequired,login:p.a.func.isRequired};var x=Object(S.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{clearErrors:A,login:function(e){var t=e.email,a=e.password;return function(e){var n=JSON.stringify({email:t,password:a});v.a.post("/api/auth",n,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"CLEAR_ERRORS"}),e({type:"LOGIN_SUCCESS",payload:t.data})})).catch((function(t){e(_(t.response.data.msg,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})}))}}})(P),M=function(e){var t=e.isAuthenticated,a=e.logout,o=e.user,c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],s=l[1],i=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("span",{className:"navbar-text mr-3"},r.a.createElement("strong",null,"Welcome Mr. ".concat(o?o.name:"")))),r.a.createElement(E.a,null,r.a.createElement(O.a,{style:{cursor:"pointer"},onClick:function(){return a()}},"Logout")))},m=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(x,null)),r.a.createElement(E.a,null,r.a.createElement(q,null)))};return r.a.createElement("div",null,r.a.createElement(f.a,{color:"dark",dark:!0,expand:"sm",className:"mb-4"},r.a.createElement(b.a,null,r.a.createElement(g.a,{href:"/"},"Todos list"),r.a.createElement(h.a,{onClick:function(){return s(!u)}}),r.a.createElement(j.a,{isOpen:u,navbar:!0},r.a.createElement(y.a,{className:"ml-auto",navbar:!0},t?r.a.createElement(i,null):r.a.createElement(m,null))))))};M.prototypes={isAuthenticated:p.a.bool.isRequired,logout:p.a.func.isRequired,user:p.a.object.isRequired};var J=Object(S.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(){return{type:"LOGOUT_SUCCESS"}}})(M),X=function(){return{type:"ITEMS_LOADING"}},V=a(103),z=a(104),H=a(107),B=a(105),W=Object(S.b)((function(e){return{todos:e.todos}}),{addTodo:function(e){return function(t,a){t(X()),v.a.post("/api/todos",e,T(a)).then((function(e){return t({type:"ADD_TODO",payload:e.data})})).catch((function(e){return t(_(e.response.data,e.response.status))}))}}})((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),s=u[0],i=u[1];return r.a.createElement("div",null,r.a.createElement(U.a,{color:"dark",className:"mb-2",onClick:function(){return c(!o)}},"Add new todo"),r.a.createElement(N.a,{isOpen:o,toggle:function(){return c(!o)}},r.a.createElement(L.a,{toggle:function(){return c(!o)}},"Add new todo"),r.a.createElement(C.a,null,r.a.createElement(k.a,{onSubmit:function(t){t.preventDefault(),e.addTodo({name:s,date:Date.now()}),c(!o)}},r.a.createElement(w.a,null,r.a.createElement(I.a,{for:"event.target.name"},"New todo:"),r.a.createElement(G.a,{type:"text",name:"name",id:"name",placeholder:"Please add you todo here",onChange:function(e){i(e.target.value)}}),r.a.createElement(U.a,{type:"submit",color:"dark",className:"mt-2 btn-block"},"Add new todo"))))))})),K=a(45),Q=Object(S.b)((function(e){return{todos:e.todos}}),{updateTodo:function(e,t){return function(a,n){a(X()),v.a.put("/api/todos/".concat(e),{name:t},T(n)).then((function(e){a({type:"UPDATE_TODOS",payload:e.data})})).catch((function(e){return a(_(e.response.data,e.response.status))}))}}})((function(e){var t=e.id,a=e.currentName,o=Object(K.a)(e,["id","currentName"]),c=Object(n.useState)(!1),l=Object(d.a)(c,2),u=l[0],s=l[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),p=m[0],E=m[1];return r.a.createElement("div",{className:"d-inline"},r.a.createElement(U.a,{className:"btn btn-secondary p-1 mx-1 d-inline",size:"sm",onClick:function(){return s(!u)}},"\u270e"),r.a.createElement(N.a,{isOpen:u,toggle:function(){return s(!u)}},r.a.createElement(L.a,{toggle:function(){return s(!u)}},"Add new todo"),r.a.createElement(C.a,null,r.a.createElement(k.a,{onSubmit:function(e){e.preventDefault(),o.updateTodo(t,p),s(!u)}},r.a.createElement(w.a,null,r.a.createElement(I.a,{for:"event.target.name"},"Update todo:"),r.a.createElement(G.a,{type:"text",name:"name",id:"name",defaultValue:a,placeholder:"Please change you todo here",onChange:function(e){E(e.target.value)}}),r.a.createElement(U.a,{type:"submit",color:"dark",className:"mt-2 btn-block"},"Update todo"))))))})),Y=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.getTodos()}},{key:"render",value:function(){var e=this,t=this.props.todos.todos,a=this.props.isAuthenticated;return r.a.createElement(b.a,null,a?r.a.createElement(W,null):r.a.createElement("h4",{className:"mb-3 ml-4"},"Please login to modify todos"),r.a.createElement(V.a,null,r.a.createElement(H.a,{className:"todo-list"},t.map((function(t){var n=t._id,o=t.name;return r.a.createElement(B.a,{key:n,timeout:500,classNames:"fade"},r.a.createElement(z.a,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"btn btn-danger",size:"sm",onClick:function(){return e.props.deleteTodo(n)}},"\u2718"),r.a.createElement(Q,{id:n,currentName:o})):"",o))})))))}}]),a}(n.Component),Z=Object(S.b)((function(e){return{todos:e.todos,isAuthenticated:e.auth.isAuthenticated}}),{getTodos:function(){return function(e){e(X()),v.a.get("/api/todos").then((function(t){e({type:"GET_TODOS",payload:t.data})})).catch((function(t){return e(_(t.response.data,t.response.status))}))}},deleteTodo:function(e){return function(t,a){t(X()),v.a.delete("/api/todos/".concat(e),T(a)).then((function(a){return t({type:"DELETE_TODO",payload:e})})).catch((function(e){return t(_(e.response.data,e.response.status))}))}}})(Y),$=a(16),ee=a(44),te=a(29),ae=a(7),ne={todos:[],loading:!1},re={msg:{},status:null,id:null},oe={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},ce=Object($.c)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TODOS":return Object(ae.a)(Object(ae.a)({},e),{},{todos:t.payload,loading:!1});case"DELETE_TODO":return Object(ae.a)(Object(ae.a)({},e),{},{todos:Object(te.a)(e.todos).filter((function(e){return e._id!==t.payload})),loading:!1});case"ADD_TODO":return Object(ae.a)(Object(ae.a)({},e),{},{todos:[t.payload].concat(Object(te.a)(e.todos)),loading:!1});case"UPDATE_TODOS":return Object(ae.a)(Object(ae.a)({},e),{},{todos:e.todos.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case"ITEMS_LOADING":return Object(ae.a)(Object(ae.a)({},e),{},{loading:!0});default:return Object(ae.a)({},e)}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(ae.a)(Object(ae.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(ae.a)(Object(ae.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(ae.a)(Object(ae.a)(Object(ae.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"REGISTER_FAIL":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),Object(ae.a)(Object(ae.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}}}),le=[ee.a],ue=Object($.e)(ce,{},Object($.d)($.a.apply(void 0,le),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),se=(a(84),function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){ue.dispatch((function(e,t){e({type:"USER_LOADING"}),v.a.get("/api/auth/user",T(t)).then((function(t){return e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(_(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}))}},{key:"render",value:function(){return r.a.createElement(S.a,{store:ue},r.a.createElement(J,null),r.a.createElement(Z,null))}}]),a}(n.Component));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.7009f313.chunk.js.map